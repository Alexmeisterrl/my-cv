---
---

<button
  id="theme-toggle"
  class="fixed top-6 right-6 z-50 p-3 rounded-2xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border border-gray-200 dark:border-gray-700 shadow-lg hover:scale-110 active:scale-95 transition-all group"
  aria-label="Farbschema wechseln"
>
  <svg
    id="sun"
    class="w-6 h-6 text-amber-500 hidden dark:block group-hover:rotate-12 transition-transform"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
    stroke-width="2"
  >
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h1M4 12H3m15.364-6.364l.707-.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707-.707M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
  </svg>
  <svg
    id="moon"
    class="w-6 h-6 text-indigo-600 block dark:hidden group-hover:-rotate-12 transition-transform"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
    stroke-width="2"
  >
    <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
  </svg>
</button>

<script is:inline>
  const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle("dark");

    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  };

  document.addEventListener('DOMContentLoaded', () => {
    const button = document.getElementById("theme-toggle");
    if (button) {
      button.addEventListener("click", handleToggleClick);
    } else {
      console.warn("Theme-Toggle Button nicht gefunden!");
    }
  });

  // Falls DOM bereits geladen ist (bei Astro View Transitions relevant)
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    const button = document.getElementById("theme-toggle");
    if (button) button.addEventListener("click", handleToggleClick);
  }
</script>
